<section id="schedule" class="schedule-section">
    <div class="schedule-container">
        {# Section Header #}
        <div class="schedule-header">
            <h2 class="schedule-title">
                {{ title }}
            </h2>
            <div class="title-underline title-underline-md"></div>
            {% if subtitle %}
            <p class="schedule-subtitle">
                {{ subtitle }}
            </p>
            {% endif %}
        </div>

        {# Schedule Grid - 2 columns #}
        <div class="schedule-grid">
            {% for timeline in timelines %}
            <div class="schedule-day-column">
                {# Day Header - Improved visual #}
                <div class="schedule-day-header">
                    <div class="schedule-day-header-inner">
                        <h3 class="schedule-day-title">
                            {{ timeline.title }}
                        </h3>
                        <div class="schedule-day-underline"></div>
                        {% if timeline.subtitle %}
                        <p class="schedule-day-subtitle">
                            {{ timeline.subtitle }}
                        </p>
                        {% endif %}
                        {% if timeline.date %}
                        <p class="schedule-day-date">
                            {{ timeline.date }}
                        </p>
                        {% endif %}
                    </div>
                </div>

                {# Timeline #}
                <div class="schedule-timeline">
                    {# Vertical line #}
                    <div class="schedule-timeline-line"></div>

                    {# Sessions #}
                    {% for item in timeline.timeline_entries %}
                    <div class="schedule-session">
                        {% if item.title == 'Lunch Break' %}
                        <div class="schedule-lunch-break">
                            <div class="schedule-lunch-line"></div>
                            <div class="schedule-lunch-overlay">
                                <span class="schedule-lunch-text">
                                    Lunch Break
                                </span>
                            </div>
                        </div>
                        {% else %}
                        {# Timeline dot - positioned outside card #}
                        <div class="schedule-session-dot"></div>

                        {# Session card #}
                        <div class="schedule-session-card">
                            {# Session title #}
                            <h4 class="schedule-session-title">
                                {{ item.title }}
                            </h4>

                            {# Time #}
                            {% if item.time %}
                            <p class="schedule-session-time">
                                {{ item.time }}
                            </p>
                            {% endif %}

                            {# Description/Info #}
                            {% if item.info %}
                            <p class="schedule-session-info">
                                {{ item.info }}
                            </p>
                            {% endif %}

                            {# Speaker with avatar #}
                            {% if item.speaker %}
                            <div class="schedule-speaker-container">
                                {# Orange badge with circular cutout for avatar #}
                                <div class="schedule-speaker-badge">
                                    {# Avatar positioned to overlap badge #}
                                    <div class="schedule-speaker-avatar">
                                        {% if item.image %}
                                            {% set image_path = item.image %}
                                            {% if image_path and not image_path.startswith('/') and not image_path.startswith('http') %}
                                                {% set image_src = '_static/images/speakers/' + image_path %}
                                            {% else %}
                                                {% set image_src = image_path %}
                                            {% endif %}
                                            <img src="{{ image_src }}" alt="{{ item.speaker }}" />
                                        {% else %}
                                            <img src="_static/images/speakers/dipy-all.svg" alt="{{ item.speaker }}" />
                                        {% endif %}
                                    </div>
                                    {# Speaker name #}
                                    <span class="schedule-speaker-name">
                                        {{ item.speaker }}
                                    </span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    {# Section Separator #}
    <div class="section-separator"></div>
</section>
